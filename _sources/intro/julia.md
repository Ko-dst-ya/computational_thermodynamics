---
jupytext:
  formats: md:myst
  text_representation:
    extension: .md
    format_name: myst
kernelspec:
  display_name: Julia
  language: julia
  name: julia-1.6
---

% substitutions: urldownload

# Основы языка программирования Julia

В данном разделе излагаются основные инструменты языка Julia, которые понадобятся в практикуме.

Здесь и далее prompt-сообщение терминала помечается равняется `%`, например,

```console
% echo $HOME
/Users/stepanzh
```

Поэтому, когда вы встретите `%`, значит команда набиралась в терминале.

## Инструкции по установке

Ниже расположены инструкции по установке исполнителя языка Julia для Linux-based операционных систем (ОС), MacOS и ОСWindows.

```{admonition} Инструкция для пользователей Linux-based ОС
:class: dropdown

Инструкция появится позже.
```

```{admonition} Инструкция для пользователей MacOS
:class: dropdown

1. Скачать `Julia-1.6.app`-пакет с официального сайта языка {{ urldownload }};
2. Стандартно для `.app` приложений установить;

Исполнитель языка находится здесь

:::
/Applications/Julia-1.6.app/Contents/Resources/julia/bin/julia
:::

Вы можете доступиться до него через терминал и запустить [Julia REPL](repl_guide).

Однако, чтобы в будущем не доступаться до Julia по абсолютному пути, добавьте `alias` в rc файл вашего терминала.

::::{admonition} Как найти rc файл
:class: dropdown

Узнайте ваш `shell`

:::console
% echo $SHELL
/bin/zsh
:::

- Если это `zsh`, то файл для настройки `~/.zshrc`.
    - Если файл отсутствует, создайте его `touch ~/.zshrc`.
- Если это `bash`, то файл для настройки `~/.bash_console`.
    - Если файл отсутствует, создайте его `touch ~/.bash_console`.
::::

Добавление `alias` (пример для `zsh`, для `bash` аналогично):

:::console
% open ~/.zshrc

# в открывшемся редакторе будет содержимое `.zshrc`, добавьте в файл строчку
alias julia='/Applications/Julia-1.6.app/Contents/Resources/julia/bin/julia'
# сохраните .zshrc

% source ~/.zshrc  # изменения вступят в силу (можно также просто перезапустить терминал)
% julia --version  # проверка, всё ли работает
julia version 1.6.2
:::
```

```{admonition} Инструкция для пользователей ОС Windows
:class: dropdown

Инструкция появится позже.
```

(repl_guide)=
## Интерактивный режим: Julia REPL

```{margin}
Это аналогично интерактивному режиму работы в Python.
```
Знакомство языка начнём с интерактивного режима. Для этого необходимо запустить Julia REPL (Read-Evaluate-Print-Loop).

На unix ОС (Linux-based, MacOS) в терминале необходимо набрать команду `julia`

```console
% julia
               _
   _       _ _(_)_     |  Documentation: https://docs.julialang.org
  (_)     | (_) (_)    |
   _ _   _| |_  __ _   |  Type "?" for help, "]?" for Pkg help.
  | | | | | | |/ _` |  |
  | | |_| | | | (_| |  |  Version 1.6.2 (2021-07-14)
 _/ |\__'_|_|_|\__'_|  |  Official https://julialang.org/ release
|__/                   |

julia>
```

Строки до `julia>` это приветственное сообщение. Здесь есть ссылка на документацию к языку. Команды для получения помощи и версия релиза.

Julia REPL обладает четыремя режимами работы. Режим отмечается prompt-строкой.

Строка `julia>` это prompt-сообщение в **исполнительном режиме** REPL-а. В нём вы можете исполнять команды языка и переходить в другие режимы.

```julia-repl
julia> println("Hello, world")
Hello, world

julia>
```

Перейти в **режим помощи** по языку можно с помощью `?`, при этом prompt-сообщение сменится на `help?>`.

```{margin}
Попробуйте также зайти в режим помощи и нажать `<Enter>`.
```
```julia-repl
help?> println
search: println printstyled print sprint isprint

  println([io::IO], xs...)

  Print (using print) xs followed by a newline. If io is not supplied, prints to stdout.

  ...
```

Чтобы выйти из режима помощи, необходимо нажать `Backspace`. *Таким же способом можно вернуться и из других режимов в **исполнительный***.

```{margin}
Программный пакет (package) это библиотека кода.
```
```{margin}
Для знакомых с Python, этот режим сочетает в себе `pip` и `virtualenv`.
```
Третий режим посвящён работе со **сторонними пакетами и окружениями**. Команда перехода `]`, prompt-сообщение `(@v1.6) pkg>`, попробуйте набрать `help`. Этот режим нам пока не понадобится.

```{margin}
Бывает удобно, но есть особенности.
```
В четвёртом режиме можно работать в терминале, не выходя из Julia REPL. Команда перехода `;`, prompt-сообщение `shell>`.

```julia-repl
shell> echo 'Привет, мир!'
Привет, мир!

shell>
```

## Числа и переменные

В Julia богатая система встроенных числовых типов, узнать тип переменной или литерала можно с помощью функции `typeof(x)`

```julia-repl
julia> typeof(5)
Int64

julia> typeof(5.0)
Float64

julia> typeof(5im)
Complex{Int64}

julia> typeof(2.3 + 5.0im)
ComplexF64 (alias for Complex{Float64})

julia> typeof(2//3)
Rational{Int64}

julia> typeof(1//3 + 2//3im)
Complex{Rational{Int64}}

```

Синтаксис присвоения значения переменной стандартный, также поддерживается параллельное присваивание и каскадное.

```julia-repl
julia> x = 5
5

julia> x, y = 1, 2
(1, 2)

julia> x
1

julia> y
2

julia> x = y = 1
1

julia> x
1

julia> y
1

```

В исполнительном режиме REPL печатает возращаемое значение, его можно опустить с помощью `;` в конце выражения.

```julia-repl
julia> x = 10;

julia> x
10

```

Имена переменных могут быть любыми Unicode символами, REPL позволяет набирать часто употребляемые с помощью LaTeX-подобного синтаксиса и `<Tab>`, например, так выглядит набор имени `α₁`:

```julia-repl
julia> \alpha  # потом нажмите `<Tab>`, и ввод сменится на α
       α
       α\_1  # `<Tab>`
       α₁
```

Доступны стандартные арифметические, алгебраические и тригонометрические операторы и функции

- бинарные `+ - * /`;
- `x ÷ y, x % y` (`\div<Tab>`) или `div(x, y), rem(x, y), divrem(x, y)` частное и остаток от деления целых;
- `^` возведение в степень;
- `log(x), log2(x), log10(x)` $\ln(x), \log_2(x), \log_{10}(x)$;
- `-x` унарный минус;
- `sin(x), cos(x)` $\sin(x), \cos(x)$;
- `sqrt(x) √x` (`\sqrt<Tab>`) $\sqrt{x}$, извлечение квадратного корня;
- ...

Стоит отметить, что (кажется, все) функции из списка определены для всех типов, перечисленных выше, но, иногда требуется аргумент подать в явном типе

```julia-repl
julia> sqrt(-1.0)
ERROR: DomainError with -1.0:
sqrt will only return a complex result if called with a complex argument. Try sqrt(Complex(x)).
...

julia> sqrt(-1.0 + 0im)
0.0 + 1.0im

```

```{admonition} Почему?
:class: dropdown

Такое поведение языка задано по двум причинам.

Во-первых, функция корня в математике определяется на разных множествах.

Во-вторых, так удаётся сохранять *стабильность типов*. Если бы функция корня извлекая из `Float64` возвращала иногда `Float64`, а иногда `Complex{Float64}`, то предсказать тип возвращаемого значения было бы невозможно. Предсказание типов позволяет *компилировать* участки исходного кода, не уступающие по скорости аналогам кода на статически типизируемых языках, например, `C/C++`.
```

Математические константы

```julia-repl
julia> π                    # \pi<Tab>
π = 3.1415926535897...

julia> ℯ                    # \euler<Tab>
ℯ = 2.7182818284590...

julia> typeof(ℯ)
Irrational{:ℯ}

```

При применении операций к разным типам тип результата интуитивен: число из типа, соответствующего, математически "меньшему" множеству конвертируется в тип математически "большего" множества. Затем операция выполняется для одинаковых типов. Система типов в Julia это её позвоночник, о ней будет подробнее позже.

## Функции

## Вектора и матрицы

% броадкаст

## Система типов и методы, multiple dispatch
% TODO "Вмещающий (больший)" тип можно посмотреть с помощью `promote`
